<Window x:Class="LanguageSchoolERP.App.Windows.AddProgramEnrollmentWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="{Binding DialogTitle}" Height="700" Width="500"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize">

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </Window.Resources>

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <TextBlock Text="Program Enrollment" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,12"/>

                <TextBlock Text="Program"/>
                <ComboBox Margin="0,4,0,10"
                          ItemsSource="{Binding ProgramTypes}"
                          DisplayMemberPath="Name"
                          SelectedItem="{Binding SelectedProgramOption}"/>

                <TextBlock Text="Level / Class"/>
                <TextBox Margin="0,4,0,10" Text="{Binding LevelOrClass}"/>

                <TextBlock Text="Agreement total (€)"/>
                <TextBox Margin="0,4,0,10" Text="{Binding AgreementTotalText}"/>

                <TextBlock Text="Books (€)"/>
                <TextBox Margin="0,4,0,10" Text="{Binding BooksAmountText}"/>

                <TextBlock Text="Downpayment (€)"/>
                <TextBox Margin="0,4,0,10" Text="{Binding DownPaymentText}"/>

                <CheckBox Margin="0,0,0,10"
                          Content="Add Study Lab"
                          IsChecked="{Binding IncludesStudyLab}"
                          Visibility="{Binding IsLanguageSchoolProgram, Converter={StaticResource BoolToVisibilityConverter}}"/>

                <StackPanel Margin="0,0,0,10"
                            Visibility="{Binding IncludesStudyLab, Converter={StaticResource BoolToVisibilityConverter}}">
                    <TextBlock Text="Study Lab monthly price (€)"/>
                    <TextBox Margin="0,4,0,0" Text="{Binding StudyLabMonthlyPriceText, UpdateSourceTrigger=PropertyChanged}"/>
                </StackPanel>

                <CheckBox Margin="0,0,0,10"
                          Content="Add Transportation"
                          IsChecked="{Binding IncludesTransportation}"
                          Visibility="{Binding IsStudyLabProgram, Converter={StaticResource BoolToVisibilityConverter}}"/>

                <StackPanel Margin="0,0,0,10"
                            Visibility="{Binding IncludesTransportation, Converter={StaticResource BoolToVisibilityConverter}}">
                    <TextBlock Text="Transportation monthly price (€)"/>
                    <TextBox Margin="0,4,0,0" Text="{Binding TransportationMonthlyPriceText, UpdateSourceTrigger=PropertyChanged}"/>
                </StackPanel>

                <TextBlock Text="Installments count (0-12)"/>
                <TextBox Margin="0,4,0,10" Text="{Binding InstallmentCountText}"/>

                <TextBlock Text="Installments start month"/>
                <DatePicker Margin="0,4,0,12" SelectedDate="{Binding InstallmentStartMonth}"/>

                <TextBlock Text="Enrollment comments"/>
                <TextBox Margin="0,4,0,0" Text="{Binding EnrollmentComments}" AcceptsReturn="True" Height="90" TextWrapping="Wrap" VerticalScrollBarVisibility="Auto"/>
            </StackPanel>
        </ScrollViewer>

        <DockPanel Grid.Row="1" Margin="0,14,0,0">
            <TextBlock Text="{Binding ErrorMessage}" Foreground="IndianRed" VerticalAlignment="Center"/>

            <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                <Button Content="Cancel" Width="100" Margin="0,0,8,0" IsCancel="True"/>
                <Button Content="Save" Width="120" Command="{Binding SaveCommand}"/>
            </StackPanel>
        </DockPanel>
    </Grid>
</Window>
